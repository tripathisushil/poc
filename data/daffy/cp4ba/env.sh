#!/bin/bash
############################################################
#Author           : Kyle Dawson
#Author email     : Kyle.Dawson@us.ibm.com
#Original Date    : 2022-01-11
#Initial Version  : v2022-02-15
############################################################
CP4BA_DEPLOYMENT_LICENSE=non-production
CP4BA_AUTO_NAMESPACE_STARTER=cp4ba-starter
CP4BA_AUTO_ALL_NAMESPACES=No
CP4BA_DEPLOYMENT_NAME=icp4adeploy
CP4BA_DEBUG=false
CP4BA_DEPLOYMENT_PROFILE_SIZE=small
CP4BA_ROOT_CA_SECRET=icp4a-root-ca
CP4BA_OPS_ML_NAMESPACE=ads-ml-service
CP4BA_OPS_VERSION=2.5.6

#ODM Defaults
#######################
#decisionCenter
CP4BA_DEPLOYMENT_STARTER_ODM_DC_REPLICA_COUNT=1
CP4BA_DEPLOYMENT_STARTER_ODM_DC_REQUEST_CPU=500m
CP4BA_DEPLOYMENT_STARTER_ODM_DC_REQUEST_MEMORY=1500Mi
CP4BA_DEPLOYMENT_STARTER_ODM_DC_REQUEST_EPHEMERAL_STORAGE=50Mi
CP4BA_DEPLOYMENT_STARTER_ODM_DC_LIMITS_CPU=2
CP4BA_DEPLOYMENT_STARTER_ODM_DC_LIMITS_MEMORY=4096Mi
CP4BA_DEPLOYMENT_STARTER_ODM_DC_LIMITS_EPHEMERAL_STORAGE=500Mi
#decisionServerRuntime
CP4BA_DEPLOYMENT_STARTER_ODM_DSR_REPLICA_COUNT=1
CP4BA_DEPLOYMENT_STARTER_ODM_DSR_REQUEST_CPU=500m
CP4BA_DEPLOYMENT_STARTER_ODM_DSR_REQUEST_MEMORY=512Mi
CP4BA_DEPLOYMENT_STARTER_ODM_DSR_LIMITS_CPU=1
CP4BA_DEPLOYMENT_STARTER_ODM_DSR_LIMITS_MEMORY=4096Mi
#decisionServerConsole
CP4BA_DEPLOYMENT_STARTER_ODM_DSC_REQUEST_CPU=500m
CP4BA_DEPLOYMENT_STARTER_ODM_DSC_REQUEST_MEMORY=512Mi
CP4BA_DEPLOYMENT_STARTER_ODM_DSC_LIMITS_CPU=1
CP4BA_DEPLOYMENT_STARTER_ODM_DSC_LIMITS_MEMORY=4096Mi
#decisionRunner
CP4BA_DEPLOYMENT_STARTER_ODM_DR_REPLICA_COUNT=1
CP4BA_DEPLOYMENT_STARTER_ODM_DR_REQUEST_CPU=500m
CP4BA_DEPLOYMENT_STARTER_ODM_DR_REQUEST_MEMORY=512Mi
CP4BA_DEPLOYMENT_STARTER_ODM_DR_LIMITS_CPU=1
CP4BA_DEPLOYMENT_STARTER_ODM_DR_LIMITS_MEMORY=4096Mi

#Filenet Defaults
#######################
#CPE
CP4BA_DEPLOYMENT_STARTER_CPE_REPLICA_COUNT=2
CP4BA_DEPLOYMENT_STARTER_CPE_REQUEST_CPU=500m
CP4BA_DEPLOYMENT_STARTER_CPE_REQUEST_MEMORY=2500Mi
CP4BA_DEPLOYMENT_STARTER_CPE_LIMITS_CPU=1
CP4BA_DEPLOYMENT_STARTER_CPE_LIMITS_MEMORY=4096Mi
CP4BA_DEPLOYMENT_STARTER_CPE_AUTO_SCALING_ENABLED=false
CP4BA_DEPLOYMENT_STARTER_CPE_AUTO_SCALING_MAX_REPLICAS=3
CP4BA_DEPLOYMENT_STARTER_CPE_AUTO_SCALING_MIN_REPLICAS=2
CP4BA_DEPLOYMENT_STARTER_CPE_AUTO_SCALING_TARGET_CPU_UTIL_PERCENT=80
#graphql
CP4BA_DEPLOYMENT_STARTER_GRAPHQL_REPLICA_COUNT=2
CP4BA_DEPLOYMENT_STARTER_GRAPHQL_REQUEST_CPU=500m
CP4BA_DEPLOYMENT_STARTER_GRAPHQL_REQUEST_MEMORY=512Mi
CP4BA_DEPLOYMENT_STARTER_GRAPHQL_LIMITS_CPU=1
CP4BA_DEPLOYMENT_STARTER_GRAPHQL_LIMITS_MEMORY=1536Mi
CP4BA_DEPLOYMENT_STARTER_GRAPHQL_AUTO_SCALING_ENABLED=false
CP4BA_DEPLOYMENT_STARTER_GRAPHQL_AUTO_SCALING_MAX_REPLICAS=3
CP4BA_DEPLOYMENT_STARTER_GRAPHQL_AUTO_SCALING_MIN_REPLICAS=2
CP4BA_DEPLOYMENT_STARTER_GRAPHQL_AUTO_SCALING_TARGET_CPU_UTIL_PERCENT=80
#css
CP4BA_DEPLOYMENT_STARTER_CSS_REPLICA_COUNT=2
CP4BA_DEPLOYMENT_STARTER_CSS_REQUEST_CPU=500m
CP4BA_DEPLOYMENT_STARTER_CSS_REQUEST_MEMORY=512Mi
CP4BA_DEPLOYMENT_STARTER_CSS_LIMITS_CPU=1
CP4BA_DEPLOYMENT_STARTER_CSS_LIMITS_MEMORY=4096Mi
#cmis
CP4BA_DEPLOYMENT_STARTER_CMIS_REPLICA_COUNT=2
CP4BA_DEPLOYMENT_STARTER_CMIS_REQUEST_CPU=500m
CP4BA_DEPLOYMENT_STARTER_CMIS_REQUEST_MEMORY=256Mi
CP4BA_DEPLOYMENT_STARTER_CMIS_LIMITS_CPU=1
CP4BA_DEPLOYMENT_STARTER_CMIS_LIMITS_MEMORY=1536Mi
CP4BA_DEPLOYMENT_STARTER_CMIS_AUTO_SCALING_ENABLED=false
CP4BA_DEPLOYMENT_STARTER_CMIS_AUTO_SCALING_MAX_REPLICAS=3
CP4BA_DEPLOYMENT_STARTER_CMIS_AUTO_SCALING_MIN_REPLICAS=2
CP4BA_DEPLOYMENT_STARTER_CMIS_AUTO_SCALING_TARGET_CPU_UTIL_PERCENT=80
#tm
CP4BA_DEPLOYMENT_STARTER_TM_REPLICA_COUNT=2
CP4BA_DEPLOYMENT_STARTER_TM_REQUEST_CPU=500m
CP4BA_DEPLOYMENT_STARTER_TM_REQUEST_MEMORY=512Mi
CP4BA_DEPLOYMENT_STARTER_TM_LIMITS_CPU=1
CP4BA_DEPLOYMENT_STARTER_TM_LIMITS_MEMORY=1536Mi
CP4BA_DEPLOYMENT_STARTER_TM_AUTO_SCALING_ENABLED=false
CP4BA_DEPLOYMENT_STARTER_TM_AUTO_SCALING_MAX_REPLICAS=3
CP4BA_DEPLOYMENT_STARTER_TM_AUTO_SCALING_MIN_REPLICAS=2
CP4BA_DEPLOYMENT_STARTER_TM_AUTO_SCALING_TARGET_CPU_UTIL_PERCENT=80

case ${CP4BA_VERSION} in
  21.0.3)
    case ${CP4BA_IFIX} in
        IF008)
            CP4BA_CASE_VERSION=3.2.8
            CP4BA_KEYTOOL_JOB_CONTAINER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_DBCOMPATIBILITY_INIT_CONTAINER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_KEYTOOL_INIT_CONTAINER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_UMSREGISTRATION_INITJOB_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_OPENLDAP_VERSION=1.5.0
            CP4BA_RESOURCE_REGISTRY_CONFIGURATION_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BAN_NAVIGATOR_VERSION=ga-3011-icn-la301
            CP4BA_ECM_CPE_VERSION=ga-558-p8cpe-la101
            CP4BA_ECM_GRAPHQL_VERSION=ga-558-p8cgql-la101
            CP4BA_ECM_ICCSAP_VERSION=ga-4004-iccsap-if009e
            CP4BA_ECM_IER_VERSION=ga-5217-ier-if005
            CP4BA_ECM_TM_VERSION=ga-3011-tm-la301
            CP4BA_ECM_CSS_VERSION=ga-558-p8css-la101
            CP4BA_ECM_CMIS_VERSION=ga-306-cmis-la106
            CP4BA_BASTUDIO_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BASTUDIO_SOLUTION_SERVER_HELMJOB_DB_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BASTUDIO_SOLUTION_SERVER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BASTUDIO_JMS_SERVER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_AUTHORING_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_PFS_BPD_DATABASE_INIT_PROD_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_SERVER_DBHANDLING=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_IAWS_IBM_WORKPLACE_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_TOOLKIT_INSTALLER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_IAWS_PS_CONTENT_INTEGRATION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_SERVER_CASE_INITIALIZTION_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_JMS_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BAML_BUI_TASK_PRIORITIZATION_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BAML_WORKFORCE_INSIGHTS_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_PFS_PROD_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}

            ;;
        IF007)
            CP4BA_CASE_VERSION=3.2.7
            CP4BA_KEYTOOL_JOB_CONTAINER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_DBCOMPATIBILITY_INIT_CONTAINER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_KEYTOOL_INIT_CONTAINER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_UMSREGISTRATION_INITJOB_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_OPENLDAP_VERSION=1.5.0
            CP4BA_RESOURCE_REGISTRY_CONFIGURATION_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BAN_NAVIGATOR_VERSION=ga-3011-icn-if003
            CP4BA_ECM_CPE_VERSION=ga-558-p8cpe-if001
            CP4BA_ECM_GRAPHQL_VERSION=ga-558-p8cgql-if001
            CP4BA_ECM_ICCSAP_VERSION=ga-4004-iccsap-if009d
            CP4BA_ECM_IER_VERSION=ga-5217-ier-if004
            CP4BA_ECM_TM_VERSION=ga-3011-tm-if003
            CP4BA_ECM_CSS_VERSION=ga-558-p8css-if001
            CP4BA_ECM_CMIS_VERSION=ga-306-cmis-la105
            CP4BA_BASTUDIO_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BASTUDIO_SOLUTION_SERVER_HELMJOB_DB_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BASTUDIO_SOLUTION_SERVER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BASTUDIO_JMS_SERVER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_AUTHORING_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_PFS_BPD_DATABASE_INIT_PROD_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_SERVER_DBHANDLING=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_IAWS_IBM_WORKPLACE_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_TOOLKIT_INSTALLER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_IAWS_PS_CONTENT_INTEGRATION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_SERVER_CASE_INITIALIZTION_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_JMS_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BAML_BUI_TASK_PRIORITIZATION_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BAML_WORKFORCE_INSIGHTS_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_PFS_PROD_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            ;;
        IF005)
            CP4BA_CASE_VERSION=3.2.5
            CP4BA_KEYTOOL_JOB_CONTAINER_VERSION=${CP4BA_VERSION}
            CP4BA_DBCOMPATIBILITY_INIT_CONTAINER_VERSION=${CP4BA_VERSION}
            CP4BA_KEYTOOL_INIT_CONTAINER_VERSION=${CP4BA_VERSION}
            CP4BA_UMSREGISTRATION_INITJOB_VERSION=${CP4BA_VERSION}
            CP4BA_OPENLDAP_VERSION=1.5.0
            CP4BA_RESOURCE_REGISTRY_CONFIGURATION_VERSION=${CP4BA_VERSION}
            CP4BA_BAN_NAVIGATOR_VERSION=ga-3011-icn-if002
            CP4BA_ECM_CPE_VERSION=ga-558-p8cpe-la005
            CP4BA_ECM_GRAPHQL_VERSION=ga-558-p8cgql-la005
            CP4BA_ECM_ICCSAP_VERSION=ga-4004-iccsap-if009c
            CP4BA_ECM_IER_VERSION=ga-5217-ier-if003
            CP4BA_ECM_TM_VERSION=ga-3011-tm-if002
            CP4BA_ECM_CSS_VERSION=ga-558-p8css-la005
            CP4BA_ECM_CMIS_VERSION=ga-306-cmis-la104
            CP4BA_BASTUDIO_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BASTUDIO_SOLUTION_SERVER_HELMJOB_DB_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BASTUDIO_SOLUTION_SERVER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BASTUDIO_JMS_SERVER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_AUTHORING_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_PFS_BPD_DATABASE_INIT_PROD_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_SERVER_DBHANDLING=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_IAWS_IBM_WORKPLACE_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_TOOLKIT_INSTALLER_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_IAWS_PS_CONTENT_INTEGRATION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_SERVER_CASE_INITIALIZTION_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_WORKFLOW_JMS_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BAML_BUI_TASK_PRIORITIZATION_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_BAML_WORKFORCE_INSIGHTS_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            CP4BA_PFS_PROD_VERSION=${CP4BA_VERSION}-${CP4BA_IFIX}
            ;;
        *)
            CP4BA_CASE_VERSION=3.2.0
            CP4BA_KEYTOOL_JOB_CONTAINER_VERSION=${CP4BA_VERSION}
            CP4BA_DBCOMPATIBILITY_INIT_CONTAINER_VERSION=${CP4BA_VERSION}
            CP4BA_KEYTOOL_INIT_CONTAINER_VERSION=${CP4BA_VERSION}
            CP4BA_UMSREGISTRATION_INITJOB_VERSION=${CP4BA_VERSION}
            CP4BA_OPENLDAP_VERSION=1.3.0
            CP4BA_RESOURCE_REGISTRY_CONFIGURATION_VERSION=${CP4BA_VERSION}
            CP4BA_BUSYBOX_VERSION=1.32
            CP4BA_PHP_LDAP_ADMIN_VERSION=0.9.0
            CP4BA_BAN_NAVIGATOR_VERSION=ga-3011-icn-if002
            CP4BA_ECM_CPE_VERSION=ga-558-p8cpe
            CP4BA_ECM_GRAPHQL_VERSION=ga-558-p8cgql
            CP4BA_ECM_ICCSAP_VERSION=ga-4004-iccsap-if009
            CP4BA_ECM_IER_VERSION=ga-521-ier-fp007
            CP4BA_ECM_TM_VERSION=ga-3011-tm
            CP4BA_ECM_CSS_VERSION=ga-558-p8css
            CP4BA_ECM_CMIS_VERSION=ga-306-cmis-la101
            CP4BA_BASTUDIO_VERSION=${CP4BA_VERSION}
            CP4BA_BASTUDIO_SOLUTION_SERVER_HELMJOB_DB_VERSION=${CP4BA_VERSION}
            CP4BA_BASTUDIO_SOLUTION_SERVER_VERSION=${CP4BA_VERSION}
            CP4BA_BASTUDIO_JMS_SERVER_VERSION=${CP4BA_VERSION}
            CP4BA_WORKFLOW_AUTHORING_VERSION=${CP4BA_VERSION}
            CP4BA_WORKFLOW_PFS_BPD_DATABASE_INIT_PROD_VERSION=${CP4BA_VERSION}
            CP4BA_WORKFLOW_SERVER_DBHANDLING=${CP4BA_VERSION}
            CP4BA_WORKFLOW_IAWS_IBM_WORKPLACE_VERSION=${CP4BA_VERSION}
            CP4BA_WORKFLOW_TOOLKIT_INSTALLER_VERSION=${CP4BA_VERSION}
            CP4BA_WORKFLOW_IAWS_PS_CONTENT_INTEGRATION=${CP4BA_VERSION}
            CP4BA_WORKFLOW_SERVER_CASE_INITIALIZTION_VERSION=${CP4BA_VERSION}
            CP4BA_WORKFLOW_JMS_VERSION=${CP4BA_VERSION}
            CP4BA_BAML_BUI_TASK_PRIORITIZATION_VERSION=${CP4BA_VERSION}
            CP4BA_BAML_WORKFORCE_INSIGHTS_VERSION=${CP4BA_VERSION}
            CP4BA_PFS_PROD_VERSION=${CP4BA_VERSION}
            ;;
    esac
esac
case ${OCP_INSTALL_TYPE} in
  roks-msp)
      #ROKS Defaults
      #######################
      CP4BA_AUTO_PLATFORM=ROKS
      CP4BA_AUTO_STORAGE_CLASS_FAST_ROKS=ibmc-file-gold-gid
      CP4BA_AUTO_STORAGE_CLASS_OCP=ibmc-file-gold-gid
      #Block does not work, need to use File class
      #CP4BA_AUTO_STORAGE_CLASS_OCP_BLOCK=ibmc-block-gold-gid
      CP4BA_AUTO_STORAGE_CLASS_OCP_BLOCK=ibmc-file-gold-gid
      CP4BA_AUTO_STORAGE_CLASS_OCP_SLOW=ibmc-file-bronze-gid
      CP4BA_AUTO_STORAGE_CLASS_OCP_MEDIUM=ibmc-file-silver-gid
      CP4BA_AUTO_STORAGE_CLASS_OCP_FAST=ibmc-file-gold-gid
      ;;
  *)
      #All Other Defaults
      #######################
      CP4BA_AUTO_PLATFORM=OCP
      CP4BA_AUTO_STORAGE_CLASS_OCP=ocs-storagecluster-cephfs
      #Block does not work, need to use File class
      #CP4BA_AUTO_STORAGE_CLASS_OCP_BLOCK=ocs-storagecluster-ceph-rbd
      CP4BA_AUTO_STORAGE_CLASS_OCP_BLOCK=ocs-storagecluster-cephfs
      CP4BA_AUTO_STORAGE_CLASS_OCP_SLOW=ocs-storagecluster-cephfs
      CP4BA_AUTO_STORAGE_CLASS_OCP_MEDIUM=ocs-storagecluster-cephfs
      CP4BA_AUTO_STORAGE_CLASS_OCP_FAST=ocs-storagecluster-cephfs
      ;;
esac
